* 3NF (Third Normal Form)

** Definition
A table is in *Third Normal Form (3NF)* if:

1. It is already in *Second Normal Form (2NF)*, and  
2. Every *non-key attribute* depends *only on the primary key*,  
   not on another *non-key attribute*.

üß† In simple words:
No field should depend on another field that isn‚Äôt a key.
‚Üí No *transitive dependencies*.

Example of transitive dependency:
=StudentID ‚Üí DepartmentID ‚Üí DepartmentName=
Here, DepartmentName depends indirectly on StudentID (through DepartmentID).

---

** Example 1: Students and Departments

*** ‚ùå Not in 3NF
| StudentID | StudentName | DepartmentID | DepartmentName |
|------------+--------------+---------------+----------------|
| 1          | Juan         | D1            | Math           |
| 2          | Mar√≠a        | D2            | Physics        |
| 3          | Pablo        | D1            | Math           |

*Primary key:* StudentID

Problem:
- =DepartmentName= depends on =DepartmentID=, not directly on =StudentID=
‚Üí Transitive dependency ‚Üí violates 3NF.

*** ‚úÖ Fixed (3NF)
Students:
| StudentID | StudentName | DepartmentID |
|------------+--------------+---------------|
| 1          | Juan         | D1            |
| 2          | Mar√≠a        | D2            |
| 3          | Pablo        | D1            |

Departments:
| DepartmentID | DepartmentName |
|---------------+----------------|
| D1            | Math           |
| D2            | Physics        |

---

** Example 2: Employees and Offices

*** ‚ùå Not in 3NF
| EmployeeID | EmployeeName | OfficeID | OfficeCity |
|-------------+---------------+-----------+-------------|
| 1           | Alice         | 101       | London      |
| 2           | Bob           | 102       | Madrid      |
| 3           | Charlie       | 101       | London      |

Problem:
- =OfficeCity= depends on =OfficeID= (not directly on EmployeeID)
‚Üí Transitive dependency.

*** ‚úÖ Fixed (3NF)
Employees:
| EmployeeID | EmployeeName | OfficeID |
|-------------+---------------+-----------|
| 1           | Alice         | 101       |
| 2           | Bob           | 102       |
| 3           | Charlie       | 101       |

Offices:
| OfficeID | OfficeCity |
|-----------+-------------|
| 101       | London      |
| 102       | Madrid      |

---

** Example 3: Orders and Customers

*** ‚ùå Not in 3NF
| OrderID | CustomerID | CustomerName | CustomerCity |
|----------+-------------+---------------+---------------|
| 1        | C1          | Juan P√©rez    | Santiago      |
| 2        | C2          | Mar√≠a D√≠az    | Valpara√≠so    |
| 3        | C1          | Juan P√©rez    | Santiago      |

Problem:
- =CustomerName= and =CustomerCity= depend on =CustomerID=, not directly on =OrderID=
‚Üí Violates 3NF.

*** ‚úÖ Fixed (3NF)
Orders:
| OrderID | CustomerID |
|----------+-------------|
| 1        | C1          |
| 2        | C2          |
| 3        | C1          |

Customers:
| CustomerID | CustomerName | CustomerCity |
|-------------+---------------+---------------|
| C1          | Juan P√©rez    | Santiago      |
| C2          | Mar√≠a D√≠az    | Valpara√≠so    |

---

** Example 4: Products and Categories

*** ‚ùå Not in 3NF
| ProductID | ProductName | CategoryID | CategoryName |
|------------+--------------+-------------+---------------|
| P1         | Keyboard     | C1          | Peripherals   |
| P2         | Mouse        | C1          | Peripherals   |
| P3         | Monitor      | C2          | Displays      |

Problem:
- =CategoryName= depends on =CategoryID=, not on =ProductID=
‚Üí Transitive dependency.

*** ‚úÖ Fixed (3NF)
Products:
| ProductID | ProductName | CategoryID |
|------------+--------------+-------------|
| P1         | Keyboard     | C1          |
| P2         | Mouse        | C1          |
| P3         | Monitor      | C2          |

Categories:
| CategoryID | CategoryName |
|-------------+---------------|
| C1          | Peripherals   |
| C2          | Displays      |

---

** Example 5: Books and Publishers

*** ‚ùå Not in 3NF
| BookID | Title        | PublisherID | PublisherName | PublisherCity |
|--------+---------------+--------------+----------------+----------------|
| 1      | Database 101  | P1           | Alfa Ed.       | Santiago       |
| 2      | Networks      | P2           | Beta Books     | Valpara√≠so     |
| 3      | Data Science  | P1           | Alfa Ed.       | Santiago       |

Problem:
- =PublisherName= and =PublisherCity= depend on =PublisherID=, not on =BookID=
‚Üí Not in 3NF.

*** ‚úÖ Fixed (3NF)
Books:
| BookID | Title        | PublisherID |
|--------+---------------+--------------|
| 1      | Database 101  | P1           |
| 2      | Networks      | P2           |
| 3      | Data Science  | P1           |

Publishers:
| PublisherID | PublisherName | PublisherCity |
|--------------+----------------+----------------|
| P1           | Alfa Ed.       | Santiago       |
| P2           | Beta Books     | Valpara√≠so     |

---

** üß† Summary (for dummies)
3NF = 2NF + no transitive dependencies.  
Every non-key field must depend *only* on the key, not on another field.

Formula:
If A ‚Üí B and B ‚Üí C, then remove C from A‚Äôs table.

Example:
StudentID ‚Üí DepartmentID ‚Üí DepartmentName  
‚Üí Move DepartmentName to a separate Departments table.

